!function(s){"use strict";s(document).ready(function(){s.fn.wpColorPicker&&s(".blogshq-color-picker").wpColorPicker();const t=s(".blogshq-tab-content"),e=s(".blogshq-nav-tab");e.on("click",function(o){o.preventDefault();const i=s(this),n=i.attr("href").split("tab=")[1];if(i.hasClass("active"))return;e.removeClass("active").attr("aria-selected","false"),i.addClass("active").attr("aria-selected","true"),t.addClass("blogshq-loading");const a=new URL(window.location);a.searchParams.set("tab",n),window.history.pushState({tab:n},"",a),s.ajax({url:blogshqAdmin.ajaxurl,type:"POST",data:{action:"blogshq_load_tab",tab:n,nonce:blogshqAdmin.nonce},success:function(e){e.success?(t.html(e.data.content),s.fn.wpColorPicker&&s(".blogshq-color-picker").wpColorPicker(),s(document).trigger("blogshq:tab-loaded",[n])):(console.error("Error loading tab:",e.data.message),t.html('<div class="notice notice-error"><p>'+blogshqAdmin.strings.error+"</p></div>"))},error:function(s,e,o){console.error("AJAX error:",o),t.html('<div class="notice notice-error"><p>'+blogshqAdmin.strings.error+"</p></div>")},complete:function(){t.removeClass("blogshq-loading")}})}),s(window).on("popstate",function(t){if(t.originalEvent.state&&t.originalEvent.state.tab){const e=t.originalEvent.state.tab,o=s('.blogshq-nav-tab[href*="tab='+e+'"]');o.length&&o.trigger("click")}}),s(document).on("submit",".blogshq-settings-section form",function(t){t.preventDefault();const e=s(this),o=e.find('input[type="submit"]'),i=o.val();o.prop("disabled",!0).val(blogshqAdmin.strings.saving||"Saving..."),s.ajax({url:blogshqAdmin.ajaxurl,type:"POST",data:e.serialize()+"&action=blogshq_save_settings",success:function(t){t.success?(e.before('<div class="notice notice-success is-dismissible"><p>'+(t.data.message||blogshqAdmin.strings.saved)+"</p></div>"),setTimeout(function(){s(".notice-success").fadeOut(function(){s(this).remove()})},3e3)):e.before('<div class="notice notice-error is-dismissible"><p>'+(t.data.message||blogshqAdmin.strings.error)+"</p></div>")},error:function(){e.before('<div class="notice notice-error is-dismissible"><p>'+blogshqAdmin.strings.error+"</p></div>")},complete:function(){o.prop("disabled",!1).val(i),s(".notice.is-dismissible").each(function(){const t=s(this);s('<button type="button" class="notice-dismiss"><span class="screen-reader-text">Dismiss</span></button>').appendTo(t).on("click",function(){t.fadeOut(function(){s(this).remove()})})})}})})})}(jQuery);