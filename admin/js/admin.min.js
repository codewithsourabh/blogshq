!function(t){"use strict";t(document).ready(function(){t.fn.wpColorPicker&&t(".blogshq-color-picker").wpColorPicker();const s=t(".blogshq-tab-content"),e=t(".blogshq-nav-tab");e.on("click",function(o){o.preventDefault();const i=t(this),n=i.attr("href").split("tab=")[1];if(i.hasClass("active"))return;e.removeClass("active").attr("aria-selected","false"),i.addClass("active").attr("aria-selected","true"),s.addClass("blogshq-loading");const r=new URL(window.location);r.searchParams.set("tab",n),window.history.pushState({tab:n},"",r),t.ajax({url:blogshqAdmin.ajaxurl,type:"POST",data:{action:"blogshq_load_tab",tab:n,nonce:blogshqAdmin.nonce},success:function(e){e.success?(s.html(e.data.content),t.fn.wpColorPicker&&t(".blogshq-color-picker").wpColorPicker(),t(document).trigger("blogshq:tab-loaded",[n])):(console.error("Error loading tab:",e.data.message),s.html('<div class="notice notice-error"><p>'+blogshqAdmin.strings.error+"</p></div>"))},error:function(t,e,o){console.error("AJAX error:",o),s.html('<div class="notice notice-error"><p>'+blogshqAdmin.strings.error+"</p></div>")},complete:function(){s.removeClass("blogshq-loading")}})}),t(window).on("popstate",function(s){if(s.originalEvent.state&&s.originalEvent.state.tab){const e=s.originalEvent.state.tab,o=t('.blogshq-nav-tab[href*="tab='+e+'"]');o.length&&o.trigger("click")}}),t(document).on("submit",".blogshq-settings-section form",function(s){s.preventDefault();const e=t(this),o=e.find('input[type="submit"]'),i=o.val();o.prop("disabled",!0).val(blogshqAdmin.strings.saving||"Saving..."),t.ajax({url:blogshqAdmin.ajaxurl,type:"POST",data:e.serialize()+"&action=blogshq_save_settings",success:function(s){let o;s.success?(e.before('<div class="notice notice-success is-dismissible"><p>'+(s.data.message||blogshqAdmin.strings.saved)+"</p></div>"),o=e.prev(".notice-success"),setTimeout(function(){t(".notice-success").fadeOut(function(){t(this).remove()})},3e3)):(e.before('<div class="notice notice-error is-dismissible"><p>'+(s.data.message||blogshqAdmin.strings.error)+"</p></div>"),o=e.prev(".notice-error")),o&&o.length&&t("html, body").animate({scrollTop:o.offset().top-40},400)},error:function(){e.before('<div class="notice notice-error is-dismissible"><p>'+blogshqAdmin.strings.error+"</p></div>");var s=e.prev(".notice-error");s.length&&t("html, body").animate({scrollTop:s.offset().top-40},400)},complete:function(){o.prop("disabled",!1).val(i),t(".notice.is-dismissible").each(function(){const s=t(this);t('<button type="button" class="notice-dismiss"><span class="screen-reader-text">Dismiss</span></button>').appendTo(s).on("click",function(){s.fadeOut(function(){t(this).remove()})})})}})})})}(jQuery);